---
type InfoConfig = {
    heading: string,
    styles: string,
};

interface Props {
    title: string;
    type: "examples" | "jargon" | "warning";
};
const {title, type} = Astro.props;

/*
  Tailwind doesn't let you do percentage stops idiomatically, 
  so the the hex of the corresponding -50 colour is used with the percentage.
*/
const config: InfoConfig = (() => {
    switch (type) {
        case "examples":
            const green50 = "#ddf1f3";
            const green800 = "#16663a";
            return {
                heading: `‚úçÔ∏è Examples:`,
                styles: `from-green-100 via-[${green50}_90%] dark:from-green-700 dark:via-[${green800}_90%] dark:to-green-900 border-green-900`,
            }
        case "jargon":
            const purple50 = "#faf5ff";
            const purple800 = "#6925aa";
            return {
                heading: `ü™∂ Jargon: ${title}`,
                styles: `from-purple-100 via-[${purple50}_90%] dark:from-purple-700 dark:via-[${purple800}_90%] dark:to-purple-900 border-purple-900`,
            };
        case "warning":
            const amber50 = "#fffbeb";
            return { 
                heading: `üöß Warning: ${title}`,
                // For some bizarre reason, using these non-tailwind colours only works as literal values
                styles: `from-amber-100 via-[${amber50}_90%] dark:text-black dark:from-[#bfab0b] dark:to-[#8c7d08] border-[#8c7d08]`,
            };
    };
})();

/* 
  This is a <div> and not a more semantically meaningful element like <aside>
  because Info cannot be separated from the content. 
  Jargon must be explained. Vocbaulary must be introduced.
*/
---
<div class={`info ${config.styles}`}>
    <p><strong>{config.heading}</strong></p>
    <slot class="last:mb:0 via-amber-50" />
</div>

<style is:global>
    @tailwind components;
    @layer components {
        .info {
            /* From and via is configured, fade to transparent automatically. */
            @apply bg-gradient-to-b;
            @apply pt-4 px-4 pb-4;
            @apply my-8;
            @apply border-solid border-x-2 border-t-4 border-b-0 rounded-t-2xl;
        }
        /* 
          .block has been extracted so that the last paragraph of this <div> 
          has no margin-bottom. 
        */
        .info p, .info strong {
            @apply last:mb-0 bg-transparent;
        }
    }
</style>
